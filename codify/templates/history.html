<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>History | Codify</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% load static %}
    <link rel="stylesheet" href="{% static 'history.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>

<header>
    <h2>Cod<span>ify</span></h2>
    <nav>
        <a href="/home/">Home</a>
        <a href="/dashboard/">Dashboard</a>
        <a href="/login/">Logout</a>
    </nav>
</header>

<main class="history-container">

    <h1>Your Review History ðŸ“œ</h1>
    <p class="subtitle">
        View all your previously reviewed code and AI feedback.
    </p>

    <!-- History List -->
    <div class="history-list">

    {% if history %}
        {% for item in history %}
        <div class="history-card">

            <div class="history-header">
                <span class="language">{{ item.language }}</span>
                <span class="date">
                    {{ item.created_at|date:"d M Y" }}
                </span>
            </div>

            <pre class="code-snippet">{{ item.code }}</pre>

            <details>
                <summary>â–¶ View AI Feedback</summary>
                <pre class="ai-result">{{ item.ai_result }}</pre>
            </details>

        </div>
        {% endfor %}
    {% else %}
        <p style="text-align:center; color:#b8aa6d;">
            No history found yet.
        </p>
    {% endif %}

</div>

        <!-- Another History Item -->
        <div class="history-card">
            <div class="history-header">
                <span class="language">JavaScript</span>
                <span class="date">10 Jan 2026</span>
            </div>

            <pre class="code-snippet">
function sum(a, b) {
  return a + b;
}
            </pre>

            <details>
                <summary>View AI Feedback</summary>
                <pre class="ai-result">
âœ” Function works correctly  
âœ” Use const or let instead of var  
âœ” Add error handling
                </pre>
            </details>
        </div>

        <!-- Django loop example -->
        {# 
        {% for item in history %}
        <div class="history-card">
            <div class="history-header">
                <span class="language">{{ item.language }}</span>
                <span class="date">{{ item.created_at }}</span>
            </div>

            <pre class="code-snippet">{{ item.code }}</pre>

            <details>
                <summary>View AI Feedback</summary>
                <pre class="ai-result">{{ item.ai_result }}</pre>
            </details>
        </div>
        {% endfor %}
        #}

    </div>

</main>

<footer>
    Â© 2026 Codify â€¢ Your Code Review History
</footer>

</body>
</html>